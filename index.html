<!DOCTYPE html>
<html lang="el">
<head>
  <meta charset="UTF-8">
  <title>HTML Editor</title>
  <script src="https://cdn.tiny.cloud/1/j1bgwxszfus5ms9p1ec5526fa3gvm0ous3as7fojyest1fwf/tinymce/6/tinymce.min.js" referrerpolicy="origin"></script>
  <script src="https://cdn.tiny.cloud/1/no-api-key/tinymce/6/langs/el.js" referrerpolicy="origin"></script>
  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
  <style>
    body {
      margin: 20px;
      font-family: "Segoe UI", sans-serif;
      background-color: #f4f4f4;
    }

    #drawer-toggle {
      position: fixed;
      top: 0;
      left: 50%;
      transform: translateX(-50%);
      z-index: 1100;
      padding: 8px 14px;
      background-color: #3498db;
      color: white;
      border: none;
      border-radius: 0 0 10px 10px;
      cursor: pointer;
    }

    #toolbar-drawer {
      position: fixed;
      top: -1000px;
      left: 0;
      width: 100%;
      background: #fff;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
      padding: 10px;
      transition: top 0.3s ease;
      z-index: 1000;
    }

    #toolbar-drawer.open {
      top: 0;
    }

    #toolbar-buttons {
      display: flex;
      flex-wrap: wrap;
      align-items: center;
      gap: 10px;
    }

    #status {
      margin-left: 10px;
      color: green;
      font-weight: bold;
    }

    textarea, #editor_ifr {
      width: 100%;
      border: 2px solid #ccc;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }

    button, label, select {
      font-size: 15px;
      padding: 8px 14px;
      background-color: #3498db;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    button:hover, label:hover, select:hover {
      background-color: #2980b9;
    }

    select {
      background-color: #3498db;
    }

    input[type="file"] {
      display: none;
    }

    input[type="text"], input[type="number"] {
      padding: 6px;
      border-radius: 6px;
      border: 1px solid #ccc;
      font-size: 14px;
    }

    #imagePath, #iframePath {
      width: 200px;
    }
  </style>
</head>
<body>

<button id="drawer-toggle" onclick="toggleDrawer()">🔽 Επιλογές</button>
<div id="toolbar-drawer">
  <div id="toolbar-buttons">
    <button onclick="insertLatex()">∑ Τύπος</button>
    <label>
      📷 Εισαγωγή εικόνας
      <input type="file" accept="image/*" onchange="insertImage(event)">
    </label>
    <input type="text" id="imagePath" placeholder="Επικόλλησε URL εικόνας">
    <button onclick="insertImageFromURL()">➕ Εικόνα από URL</button>
    <label>
      🌐 Εισαγωγή iframe
      <input type="file" accept="text/html" onchange="insertIframe(event)">
    </label>
    <input type="text" id="iframePath" placeholder="Επικόλλησε URL iframe">
    <button onclick="insertIframeFromURL()">➕ Iframe από URL</button>
    <label>
      📏 Μέγεθος σελίδας:
      <select id="pageSize" onchange="setPageSize()">
        <option value="A4">A4</option>
        <option value="A5">A5</option>
        <option value="Letter">Letter</option>
        <option value="Custom">Προσαρμοσμένο</option>
      </select>
    </label>
    <label>
      ➕ Πλάτος (px):
      <input type="number" id="customWidth" value="800" min="100" onchange="setPageSize()">
    </label>
    <label>
      ➕ Ύψος (px):
      <input type="number" id="customHeight" value="1000" min="100" onchange="setPageSize()">
    </label>
    <label>
      📐 Περιθώρια:
      <input type="number" id="marginTop" placeholder="Πάνω" value="20" onchange="setMargins()">
      <input type="number" id="marginRight" placeholder="Δεξιά" value="20" onchange="setMargins()">
      <input type="number" id="marginBottom" placeholder="Κάτω" value="20" onchange="setMargins()">
      <input type="number" id="marginLeft" placeholder="Αριστερά" value="20" onchange="setMargins()">
    </label>
    <label>
      ↕ Προσανατολισμός:
      <select id="orientation" onchange="setOrientation()">
        <option value="portrait">Κατακόρυφο</option>
        <option value="landscape">Οριζόντιο</option>
      </select>
    </label>
  </div>
</div>

<textarea id="editor"></textarea>

<script>
  function toggleDrawer() {
    const drawer = document.getElementById('toolbar-drawer');
    drawer.classList.toggle('open');
  }

  function insertLatex() {
    const formula = prompt("Γράψε τον τύπο LaTeX:", "E = mc^2");
    if (formula) {
      tinymce.activeEditor.execCommand('mceInsertContent', false, `\\[${formula}\\]`);
      MathJax.typesetPromise();
    }
  }

  function insertImage(event) {
    const file = event.target.files[0];
    const reader = new FileReader();
    reader.onload = function (e) {
      tinymce.activeEditor.insertContent(`<img src="${e.target.result}" alt="εικόνα">`);
    };
    reader.readAsDataURL(file);
  }

  function insertImageFromURL() {
    const url = document.getElementById('imagePath').value;
    if (url) {
      tinymce.activeEditor.insertContent(`<img src="${url}" alt="εικόνα από URL">`);
    }
  }

  function insertIframe(event) {
    const file = event.target.files[0];
    const reader = new FileReader();
    reader.onload = function (e) {
      tinymce.activeEditor.insertContent(`<iframe srcdoc="${e.target.result}" width="100%" height="400"></iframe>`);
    };
    reader.readAsText(file);
  }

  function insertIframeFromURL() {
    const url = document.getElementById('iframePath').value;
    if (url) {
      tinymce.activeEditor.insertContent(`<iframe src="${url}" width="100%" height="400"></iframe>`);
    }
  }

  function setPageSize() {
    const size = document.getElementById('pageSize').value;
    const editorBody = tinymce.activeEditor.getBody();
    let width, height;
    if (size === 'A4') {
      width = 794; height = 1123;
    } else if (size === 'A5') {
      width = 559; height = 794;
    } else if (size === 'Letter') {
      width = 816; height = 1056;
    } else {
      width = parseInt(document.getElementById('customWidth').value);
      height = parseInt(document.getElementById('customHeight').value);
    }
    editorBody.style.width = width + 'px';
    editorBody.style.height = height + 'px';
  }

  function setMargins() {
    const editorBody = tinymce.activeEditor.getBody();
    const top = document.getElementById('marginTop').value + 'px';
    const right = document.getElementById('marginRight').value + 'px';
    const bottom = document.getElementById('marginBottom').value + 'px';
    const left = document.getElementById('marginLeft').value + 'px';
    editorBody.style.padding = `${top} ${right} ${bottom} ${left}`;
  }

  function setOrientation() {
    const orientation = document.getElementById('orientation').value;
    const editorBody = tinymce.activeEditor.getBody();
    if (orientation === 'landscape') {
      editorBody.style.transform = 'rotate(90deg)';
    } else {
      editorBody.style.transform = 'none';
    }
  }

  tinymce.init({
    selector: '#editor',
    language: 'el',
    height: 600,
    setup: function (editor) {
      editor.on('Change KeyUp', function () {
        MathJax.typesetPromise();
      });
      editor.on('init', function () {
        setPageSize();
        setMargins();
      });
    }
  });
</script>

</body>
</html>
